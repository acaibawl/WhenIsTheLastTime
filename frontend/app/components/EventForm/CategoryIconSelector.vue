<template>
  <div>
    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
      ã‚«ãƒ†ã‚´ãƒªãƒ¼
      <span class="text-red-500">*</span>
    </label>
    <div
      role="radiogroup"
      aria-label="ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¢ã‚¤ã‚³ãƒ³é¸æŠž"
      class="grid grid-cols-5 gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl"
    >
      <button
        v-for="icon in CATEGORY_ICONS"
        :key="icon.id"
        type="button"
        role="radio"
        :aria-checked="modelValue === icon.id"
        :aria-label="`${icon.label}ã‚«ãƒ†ã‚´ãƒªãƒ¼`"
        :class="[
          'flex items-center justify-center w-12 h-12 md:w-14 md:h-14 rounded-xl text-2xl md:text-3xl transition-all duration-150',
          'hover:bg-gray-200 dark:hover:bg-gray-700',
          modelValue === icon.id
            ? 'bg-blue-100 dark:bg-blue-900 border-2 border-blue-500 opacity-100 shadow-md'
            : 'bg-gray-100 dark:bg-gray-700 border-2 border-transparent opacity-60',
        ]"
        @click="selectIcon(icon.id)"
        @keydown.space.prevent="selectIcon(icon.id)"
        @keydown.enter.prevent="selectIcon(icon.id)"
      >
        {{ icon.icon }}
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
// åž‹å®šç¾©
type CategoryType
  = | 'pin'
    | 'book'
    | 'folder'
    | 'star'
    | 'chart'
    | 'sun'
    | 'person'
    | 'hospital'
    | 'medical'
    | 'leaf'
    | 'search'
    | 'people'
    | 'snowflake'
    | 'fire'
    | 'lightning';

interface CategoryIcon {
  id: CategoryType;
  icon: string;
  label: string;
  color: string;
}

// Props & Emits
interface Props {
  modelValue: CategoryType;
}

interface Emits {
  (e: 'update:modelValue', value: CategoryType): void;
}

defineProps<Props>();
const emit = defineEmits<Emits>();

// ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¢ã‚¤ã‚³ãƒ³å®šç¾©
const CATEGORY_ICONS: CategoryIcon[] = [
  { id: 'pin', icon: 'ðŸ“Œ', label: 'ãƒ”ãƒ³', color: '#EF4444' },
  { id: 'book', icon: 'ðŸ“š', label: 'æœ¬', color: '#3B82F6' },
  { id: 'folder', icon: 'ðŸ“', label: 'ãƒ•ã‚©ãƒ«ãƒ€', color: '#F59E0B' },
  { id: 'star', icon: 'â­', label: 'ã‚¹ã‚¿ãƒ¼', color: '#EAB308' },
  { id: 'chart', icon: 'ðŸ“Š', label: 'ã‚°ãƒ©ãƒ•', color: '#8B5CF6' },
  { id: 'sun', icon: 'â˜€ï¸', label: 'å¤ªé™½', color: '#F97316' },
  { id: 'person', icon: 'ðŸ‘¤', label: 'äººç‰©', color: '#6B7280' },
  { id: 'hospital', icon: 'ðŸ¥', label: 'ç—…é™¢', color: '#EC4899' },
  { id: 'medical', icon: 'âž•', label: 'ãƒ—ãƒ©ã‚¹ãƒ»åŒ»ç™‚', color: '#10B981' },
  { id: 'leaf', icon: 'ðŸƒ', label: 'è‘‰', color: '#22C55E' },
  { id: 'search', icon: 'ðŸ”', label: 'è™«çœ¼é¡', color: '#6366F1' },
  { id: 'people', icon: 'ðŸ‘¥', label: 'è¤‡æ•°äºº', color: '#8B5CF6' },
  { id: 'snowflake', icon: 'â„ï¸', label: 'é›ªã®çµæ™¶', color: '#06B6D4' },
  { id: 'fire', icon: 'ðŸ”¥', label: 'ç‚Ž', color: '#DC2626' },
  { id: 'lightning', icon: 'âš¡', label: 'é›·', color: '#EACC0B' },
];

// ãƒ¡ã‚½ãƒƒãƒ‰
const selectIcon = (iconId: CategoryType) => {
  emit('update:modelValue', iconId);
};
</script>
