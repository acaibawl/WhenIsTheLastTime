# サイドメニュー（フィルター画面）設計書

## 1. 画面概要

### 1.1 画面名
サイドメニュー（フィルター画面）

### 1.2 目的
イベント一覧のフィルタリング、設定画面への遷移、その他機能へのアクセスを提供する。ユーザーが表示するイベントを条件で絞り込み、アプリケーションの設定を変更できる。

### 1.3 アクセス方法
- メイン画面のハンバーガーメニューアイコンをタップ
- 画面左端からスワイプ（Phase2以降）

### 1.4 URL設計

#### フロントエンドURL
```
サイドメニューはオーバーレイ表示のため、独立したURLは持たない
メイン画面のURLにフィルター状態がクエリパラメータとして反映される

例: https://example.com?timeFilter=weeks&category=book
```

#### バックエンドAPI URL
```
フィルター統計情報やカテゴリー一覧はフロント側で計算・管理するため、
専用のAPIエンドポイントは不要

イベントデータはメイン画面のAPI（GET /events）から取得する
```

## 2. 画面構成

### 2.1 レイアウト構成

```
┌─────────────────────────────────────┐
│                                     │
│  最後はいつ？                        │ ← ヘッダー
│  👤 Taro                            │ ← ニックネーム
│                                     │
├─────────────────────────────────────┤
│                                     │
│  時間でフィルター                    │ ← セクションタイトル
│                                     │
│  ○ 全て (42)                        │ ← フィルターオプション
│  ○ 数週間前 (15)                    │
│  ○ 数ヶ月前 (8)                     │
│  ○ 数年前 (3)                       │
│                                     │
├─────────────────────────────────────┤
│                                     │
│  カテゴリーでフィルター              │ ← セクションタイトル
│                                     │
│  ┌───┬───┬───┬───┬───┐            │
│  │📌 │📚 │📁 │⭐ │📊 │            │ ← アイコングリッド
│  └───┴───┴───┴───┴───┘            │   (5列)
│  ┌───┬───┬───┬───┬───┐            │
│  │☀️ │👤 │🏥 │➕ │🍃 │            │
│  └───┴───┴───┴───┴───┘            │
│  ┌───┬───┬───┬───┬───┐            │
│  │🔍 │👥 │❄️ │🔥 │⚡ │            │
│  └───┴───┴───┴───┴───┘            │
│                                     │
├─────────────────────────────────────┤
│                                     │
│  ⚙️  設定                            │ ← ナビゲーションリンク
│                                     │
│  💬 問題/ご意見                      │
│                                     │
└─────────────────────────────────────┘
```

### 2.2 UI コンポーネント構成

#### ヘッダー
- **タイトル**
  - テキスト: "最後はいつ？"
  - フォントサイズ: 20px
  - フォントウェイト: 700（Bold）
  - パディング: 24px（上）、20px（左右）、8px（下）

- **ニックネーム表示**
  - フォーマット: 👤 {nickname}
  - フォントサイズ: 14px
  - 色: グレー (#6B7280)
  - パディング: 0px（上）、20px（左右）、16px（下）
  - 最大表示文字数: 20文字（超過時は"..."）
  - パディング: 24px（上下）、20px（左右）

#### 時間フィルターセクション

**セクションタイトル:**
- テキスト: "時間でフィルター"
- フォントサイズ: 14px
- フォントウェイト: 600（Semi-Bold）
- 色: グレー (#6B7280)
- パディング: 16px（上）、20px（左右）

**フィルターオプション（ラジオボタン）:**
```typescript
interface TimeFilterOption {
  id: TimeFilterType;
  label: string;
  count: number;
  description?: string;
}

const timeFilterOptions: TimeFilterOption[] = [
  { id: 'all', label: '全て', count: 42 },
  { id: 'weeks', label: '数週間前', count: 15, description: '1週間以上前のものだけ含む' },
  { id: 'months', label: '数ヶ月前', count: 8, description: '1ヶ月以上前のものだけ含む' },
  { id: 'years', label: '数年前', count: 3, description: '1年以上前のものだけ含む' },
];
```

**スタイル:**
- 高さ: 48px（各オプション）
- パディング: 12px（上下）、20px（左右）
- 選択時の背景色: プライマリーカラー薄め (#EFF6FF)
- ホバー時の背景色: グレー薄め (#F9FAFB)

**ラジオボタン:**
- サイズ: 20px
- 選択時: 青色 (#3B82F6)
- 未選択時: グレー (#D1D5DB)

**件数バッジ:**
- フォントサイズ: 14px
- 色: グレー (#6B7280)
- 位置: 右端

#### カテゴリーフィルターセクション

**セクションタイトル:**
- テキスト: "カテゴリーでフィルター"
- スタイルは時間フィルターセクションと同じ

**アイコングリッド:**
- レイアウト: 5列のグリッド
- アイコンサイズ: 48x48px（タップ領域）
- アイコン実サイズ: 28x28px
- ギャップ: 8px
- パディング: 20px（左右）、16px（上下）

**アイコンボタン:**
```typescript
interface CategoryIcon {
  id: CategoryType;
  icon: string;
  label: string;
  color: string;
}

const categoryIcons: CategoryIcon[] = [
  { id: 'pin', icon: '📌', label: 'ピン', color: '#EF4444' },
  { id: 'book', icon: '📚', label: '本', color: '#3B82F6' },
  { id: 'folder', icon: '📁', label: 'フォルダ', color: '#F59E0B' },
  { id: 'star', icon: '⭐', label: 'スター', color: '#EAB308' },
  { id: 'graph', icon: '📊', label: 'グラフ', color: '#8B5CF6' },
  { id: 'sun', icon: '☀️', label: '太陽', color: '#F97316' },
  { id: 'person', icon: '👤', label: '人物', color: '#6B7280' },
  { id: 'hospital', icon: '🏥', label: '病院', color: '#EC4899' },
  { id: 'plus', icon: '➕', label: 'プラス', color: '#10B981' },
  { id: 'leaf', icon: '🍃', label: '葉', color: '#22C55E' },
  { id: 'search', icon: '🔍', label: '虫眼鏡', color: '#6366F1' },
  { id: 'people', icon: '👥', label: '複数人', color: '#8B5CF6' },
  { id: 'snow', icon: '❄️', label: '雪', color: '#06B6D4' },
  { id: 'fire', icon: '🔥', label: '炎', color: '#DC2626' },
  { id: 'lightning', icon: '⚡', label: '雷', color: '#EACC0B' },
];
```

**スタイル:**
- 未選択時:
  - 背景色: グレー薄め (#F3F4F6)
  - ボーダー: 2px solid transparent
  
- 選択時:
  - 背景色: プライマリーカラー薄め (#EFF6FF)
  - ボーダー: 2px solid プライマリーカラー (#3B82F6)
  - シャドウ: 0 0 0 3px rgba(59, 130, 246, 0.1)

- ホバー時:
  - 背景色: グレー中間 (#E5E7EB)
  - トランジション: 150ms

- ボーダーラジアス: 12px

#### ナビゲーションセクション

**ナビゲーションリンク:**
- 高さ: 56px（各リンク）
- パディング: 16px（上下）、20px（左右）
- フォントサイズ: 16px
- アイコンサイズ: 24x24px
- アイコンとテキストの間隔: 12px

**スタイル:**
- 未選択時:
  - 背景色: 透明
  - 色: ダークグレー (#1F2937)
  
- ホバー時:
  - 背景色: グレー薄め (#F9FAFB)
  
- タップ時:
  - 背景色: グレー中間 (#F3F4F6)

**区切り線:**
- 色: グレー薄め (#E5E7EB)
- 高さ: 1px
- マージン: 8px（上下）

## 3. 機能詳細

### 3.1 サイドメニューの開閉

#### 開く操作
1. **ハンバーガーメニューアイコンタップ**
   - メイン画面左上のアイコンをタップ
   
2. **スワイプジェスチャー**
   - 画面左端から右へスワイプ（20px以内から開始）

#### 閉じる操作
1. **オーバーレイタップ**
   - サイドメニュー外（右側の暗いオーバーレイ部分）をタップ
   
2. **スワイプジェスチャー**
   - サイドメニューを左へスワイプ
   
3. **バックボタン（Android）**
   - Androidの戻るボタンでメニューを閉じる

#### アニメーション
```typescript
const menuAnimation = {
  // 開く
  enter: {
    duration: 300,
    easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
    transform: 'translateX(0)',
  },
  // 閉じる
  leave: {
    duration: 250,
    easing: 'cubic-bezier(0.4, 0, 0.2, 1)',
    transform: 'translateX(-100%)',
  },
};

const overlayAnimation = {
  enter: {
    duration: 300,
    opacity: 1,
  },
  leave: {
    duration: 250,
    opacity: 0,
  },
};
```

### 3.2 時間フィルター

#### フィルター条件

| フィルター | 条件 | 説明 |
|----------|------|------|
| 全て | すべて表示 | フィルターなし |
| 数週間前 | 最終実行日が7日以上前 | 1週間以上経過したイベント |
| 数ヶ月前 | 最終実行日が30日以上前 | 1ヶ月以上経過したイベント |
| 数年前 | 最終実行日が365日以上前 | 1年以上経過したイベント |

#### 動作
1. ラジオボタンをタップしてフィルターを選択
2. 選択と同時にメイン画面のイベント一覧が更新される
3. URLのクエリパラメータが更新される
4. サイドメニューは開いたまま（自動で閉じない）

#### 件数表示
- 各フィルターオプションの右側に該当件数を表示
- 件数は**フロント側で計算**（Pinia Storeの全イベントデータから集計）
- イベントの追加・削除時にリアルタイムで更新

### 3.3 カテゴリーフィルター

#### 動作
1. アイコンをタップして選択/解除（トグル動作）
2. **複数選択可能**（チェックボックスの挙動）
3. 選択したカテゴリーのイベントのみ表示（OR条件）
4. 選択と同時にメイン画面のイベント一覧が更新される
5. URLのクエリパラメータが更新される

#### URL反映
```typescript
// 例: bookとstarを選択
// URL: ?category=book&category=star

// Nuxt3での実装
const selectedCategories = ref<CategoryType[]>([]);

const updateCategoryFilter = (category: CategoryType) => {
  const index = selectedCategories.value.indexOf(category);
  if (index > -1) {
    selectedCategories.value.splice(index, 1);
  } else {
    selectedCategories.value.push(category);
  }
  
  // URLを更新
  navigateTo({
    query: {
      ...route.query,
      category: selectedCategories.value,
    },
  });
};
```

#### フィルターのリセット
- 「全て」フィルターを選択すると、カテゴリーフィルターも解除される
- URLから `category` パラメータが削除される

### 3.4 ナビゲーション

#### 設定画面への遷移
- 「⚙️ 設定」をタップ
- 設定画面へ遷移
- サイドメニューは自動で閉じる
- URL: `/settings`

#### 問題/ご意見
- 「💬 問題/ご意見」をタップ
- フィードバック画面またはメール送信へ遷移
- URL: `/feedback`

## 4. 状態管理

### 4.1 コンポーネント状態

```typescript
interface SideMenuState {
  // メニューの開閉状態
  isOpen: boolean;
  
  // フィルター状態
  timeFilter: TimeFilterType;
  selectedCategories: CategoryType[];
  
  // 統計情報
  filterStats: {
    all: number;
    weeks: number;
    months: number;
    years: number;
  };
  
  // カテゴリー一覧
  categories: CategoryIcon[];
}

type TimeFilterType = 'all' | 'weeks' | 'months' | 'years';
type CategoryType = 'pin' | 'book' | 'folder' | 'star' | 'graph' | 'sun' | 
                    'person' | 'hospital' | 'plus' | 'leaf' | 'search' | 
                    'people' | 'snow' | 'fire' | 'lightning';
```

### 4.2 Pinia Store（例）

```typescript
// stores/events.ts
import dayjs from 'dayjs';

export const useEventsStore = defineStore('events', () => {
  const allEvents = ref<Event[]>([]);
  const timeFilter = ref<TimeFilterType>('all');
  const selectedCategories = ref<CategoryType[]>([]);
  
  // イベント一覧を取得（API呼び出し）
  const fetchEvents = async () => {
    const { data } = await $fetch('/events');
    allEvents.value = data.events;
  };
  
  // フィルター統計を計算（フロント側で集計）
  const filterStats = computed(() => {
    const now = dayjs();
    return {
      all: allEvents.value.length,
      weeks: allEvents.value.filter(e => 
        dayjs(e.lastExecutedAt).isBefore(now.subtract(7, 'day'))
      ).length,
      months: allEvents.value.filter(e => 
        dayjs(e.lastExecutedAt).isBefore(now.subtract(30, 'day'))
      ).length,
      years: allEvents.value.filter(e => 
        dayjs(e.lastExecutedAt).isBefore(now.subtract(365, 'day'))
      ).length,
    };
  });
  
  // フィルター適用後のイベント一覧（computed）
  const filteredEvents = computed(() => {
    let events = allEvents.value;
    
    // 時間フィルター適用
    if (timeFilter.value !== 'all') {
      const now = dayjs();
      const daysMap = { weeks: 7, months: 30, years: 365 };
      const days = daysMap[timeFilter.value];
      events = events.filter(e => 
        dayjs(e.lastExecutedAt).isBefore(now.subtract(days, 'day'))
      );
    }
    
    // カテゴリーフィルター適用
    if (selectedCategories.value.length > 0) {
      events = events.filter(e => 
        selectedCategories.value.includes(e.categoryIcon)
      );
    }
    
    return events;
  });
  
  // 時間フィルターを設定
  const setTimeFilter = (filter: TimeFilterType) => {
    timeFilter.value = filter;
    // 「全て」を選択した場合、カテゴリーフィルターもリセット
    if (filter === 'all') {
      selectedCategories.value = [];
    }
  };
  
  // カテゴリーフィルターをトグル
  const toggleCategory = (category: CategoryType) => {
    const index = selectedCategories.value.indexOf(category);
    if (index > -1) {
      selectedCategories.value.splice(index, 1);
    } else {
      selectedCategories.value.push(category);
    }
  };
  
  // フィルターをクリア
  const clearFilters = () => {
    timeFilter.value = 'all';
    selectedCategories.value = [];
  };
  
  return {
    allEvents,
    timeFilter,
    selectedCategories,
    filterStats,
    filteredEvents,
    fetchEvents,
    setTimeFilter,
    toggleCategory,
    clearFilters,
  };
});
```

**カテゴリー定義（固定値）:**

```typescript
// constants/categories.ts
export const CATEGORIES: CategoryIcon[] = [
  { id: 'pin', icon: '📌', label: 'ピン', color: '#EF4444' },
  { id: 'book', icon: '📚', label: '本', color: '#3B82F6' },
  { id: 'folder', icon: '📁', label: 'フォルダ', color: '#F59E0B' },
  { id: 'star', icon: '⭐', label: 'スター', color: '#EAB308' },
  { id: 'graph', icon: '📊', label: 'グラフ', color: '#8B5CF6' },
  { id: 'sun', icon: '☀️', label: '太陽', color: '#F97316' },
  { id: 'person', icon: '👤', label: '人物', color: '#6B7280' },
  { id: 'hospital', icon: '🏥', label: '病院', color: '#EC4899' },
  { id: 'plus', icon: '➕', label: 'プラス', color: '#10B981' },
  { id: 'leaf', icon: '🍃', label: '葉', color: '#22C55E' },
  { id: 'search', icon: '🔍', label: '虫眼鏡', color: '#6366F1' },
  { id: 'people', icon: '👥', label: '複数人', color: '#8B5CF6' },
  { id: 'snow', icon: '❄️', label: '雪', color: '#06B6D4' },
  { id: 'fire', icon: '🔥', label: '炎', color: '#DC2626' },
  { id: 'lightning', icon: '⚡', label: '雷', color: '#EACC0B' },
];
```

## 5. API仕様

**注意:** サイドメニュー専用のAPIエンドポイントは不要です。  
イベントデータは `GET /events` から取得し、フィルター統計やカテゴリー情報はフロント側で計算・管理します。

Phase 1では以下の理由からこのアプローチを採用：
- イベント数が少ない（想定: 数十〜数百件）ため、フロント側での処理が十分高速
- APIリクエスト数を削減できる
- サーバー側の実装がシンプルになる

将来的にイベント数が増加した場合（目安: 1000件以上）は、サーバー側でのフィルタリングAPIを検討します。

### 5.1 使用するAPI

将来的にイベント数が増加した場合（目安: 1000件以上）は、サーバー側でのフィルタリングAPIを検討します。

### 5.1 使用するAPI

- **イベント一覧取得**: `GET /events`
  - 詳細は[メイン画面（イベント一覧）設計書](./メイン画面（イベント一覧）.md#51-イベント一覧取得)を参照

## 6. レスポンシブデザイン

### 6.1 ブレークポイント別の表示

#### モバイル（0px - 640px）
- サイドメニュー幅: 280px
- オーバーレイ: 全画面（残り部分を暗くする）
- アイコングリッド: 5列

#### タブレット（641px - 1024px）
- サイドメニュー幅: 320px
- オーバーレイ: 全画面
- アイコングリッド: 5列
- フォントサイズ: やや大きめ

#### デスクトップ（1025px以上）
- サイドメニュー幅: 360px
- オーバーレイ: 全画面
- アイコングリッド: 5列
- フォントサイズ: デスクトップ向け

### 6.2 オーバーレイ

```typescript
const overlayStyle = {
  position: 'fixed',
  top: 0,
  left: 0,
  right: 0,
  bottom: 0,
  backgroundColor: 'rgba(0, 0, 0, 0.5)',
  zIndex: 998,
};

const sideMenuStyle = {
  position: 'fixed',
  top: 0,
  left: 0,
  bottom: 0,
  width: '280px', // モバイル
  backgroundColor: '#FFFFFF',
  boxShadow: '4px 0 6px rgba(0, 0, 0, 0.1)',
  zIndex: 999,
  overflowY: 'auto',
};
```

## 7. アクセシビリティ

### 7.1 キーボード操作
- Tab キー: フォーカス移動（フィルターオプション、アイコン、ナビゲーションリンク）
- Space / Enter キー: 選択
- Esc キー: サイドメニューを閉じる
- Arrow キー: ラジオボタン間の移動

### 7.2 スクリーンリーダー対応

```html
<!-- サイドメニュー -->
<nav 
  role="navigation" 
  aria-label="フィルターとナビゲーション"
  aria-hidden="false"
>
  <!-- 時間フィルター -->
  <div role="radiogroup" aria-label="時間でフィルター">
    <div 
      role="radio" 
      aria-checked="true"
      aria-label="全て、42件"
      tabindex="0"
    >
      全て (42)
    </div>
  </div>
  
  <!-- カテゴリーフィルター -->
  <div role="group" aria-label="カテゴリーでフィルター">
    <button 
      role="checkbox"
      aria-checked="false"
      aria-label="本カテゴリー"
      tabindex="0"
    >
      📚
    </button>
  </div>
</nav>

<!-- オーバーレイ -->
<div 
  role="button"
  aria-label="メニューを閉じる"
  tabindex="-1"
  @click="closeSideMenu"
></div>
```

### 7.3 フォーカス管理
- サイドメニューが開いたとき、最初のフォーカス可能要素にフォーカス
- サイドメニューが閉じたとき、ハンバーガーメニューアイコンにフォーカスを戻す
- サイドメニュー内でフォーカストラップ（外部に移動しない）

## 8. アニメーション

### 8.1 サイドメニューの開閉アニメーション

```typescript
// Nuxt UI v4 + Tailwind CSS
const slideInAnimation = {
  enterFromClass: '-translate-x-full',
  enterActiveClass: 'transition-transform duration-300 ease-out',
  enterToClass: 'translate-x-0',
  leaveFromClass: 'translate-x-0',
  leaveActiveClass: 'transition-transform duration-250 ease-in',
  leaveToClass: '-translate-x-full',
};

const fadeAnimation = {
  enterFromClass: 'opacity-0',
  enterActiveClass: 'transition-opacity duration-300',
  enterToClass: 'opacity-100',
  leaveFromClass: 'opacity-100',
  leaveActiveClass: 'transition-opacity duration-250',
  leaveToClass: 'opacity-0',
};
```

### 8.2 フィルター選択時のアニメーション
- アイコン選択時: スケールアニメーション（scale: 0.95 → 1.0）
- ラジオボタン選択時: チェックマークのフェードイン
- 遷移時間: 150ms

## 9. エラーハンドリング

### 9.1 統計情報の読み込みエラー
- エラー時は前回の統計情報を表示
- トースト通知で「統計情報の取得に失敗しました」と表示
- リトライボタンを提供

### 9.2 フィルター適用エラー
- フィルターの適用に失敗した場合、前の状態に戻す
- エラーメッセージをトースト通知で表示

## 10. テストケース

### 10.1 表示テスト
- [ ] サイドメニューが正しく開く
- [ ] サイドメニューが正しく閉じる
- [ ] 時間フィルターオプションが表示される
- [ ] カテゴリーアイコンが15個すべて表示される
- [ ] 件数が各フィルターオプションに表示される
- [ ] ナビゲーションリンクが表示される

### 10.2 インタラクションテスト
- [ ] ハンバーガーメニューアイコンをタップしてメニューが開く
- [ ] 左端からスワイプしてメニューが開く
- [ ] オーバーレイをタップしてメニューが閉じる
- [ ] 左にスワイプしてメニューが閉じる
- [ ] 時間フィルターをタップして選択できる
- [ ] カテゴリーアイコンをタップして選択/解除できる
- [ ] 複数のカテゴリーを選択できる

### 10.3 フィルター機能テスト
- [ ] 時間フィルター選択でメイン画面が更新される
- [ ] カテゴリーフィルター選択でメイン画面が更新される
- [ ] URLが正しく更新される
- [ ] ページリロード後もフィルター状態が保持される
- [ ] 「全て」選択でカテゴリーフィルターが解除される

### 10.4 ナビゲーションテスト
- [ ] 設定リンクをタップして設定画面に遷移する
- [ ] 問題/ご意見リンクをタップしてフィードバック画面に遷移する
- [ ] ナビゲーション後にサイドメニューが閉じる

### 10.5 アクセシビリティテスト
- [ ] キーボードで操作できる
- [ ] Escキーでメニューが閉じる
- [ ] スクリーンリーダーで読み上げられる
- [ ] フォーカストラップが機能する

### 10.6 レスポンシブテスト
- [ ] モバイルで適切に表示される
- [ ] タブレットで適切に表示される
- [ ] デスクトップで適切に表示される

### 10.7 パフォーマンステスト
- [ ] メニューの開閉がスムーズ（60fps）
- [ ] フィルター適用が200ms以内

## 11. 実装優先順位（Phase 1 MVP）

### 優先度: 高
1. サイドメニューの開閉機能
2. 時間フィルター（ラジオボタン）
3. フィルター選択時のメイン画面更新
4. URLクエリパラメータとの同期

### 優先度: 中
5. カテゴリーフィルター（複数選択）
6. フィルター統計情報の表示
7. 設定画面への遷移

### 優先度: 低（Phase 2以降）
8. スワイプジェスチャーでの開閉
9. フィードバック画面への遷移
10. アニメーションの詳細調整

## 12. 技術的な実装メモ

### 12.1 コンポーネント構成（Vue 3 / Nuxt 3）

```
components/
  SideMenu/
    index.vue                    # サイドメニュー本体
    TimeFilterSection.vue        # 時間フィルターセクション
    CategoryFilterSection.vue    # カテゴリーフィルターセクション
    NavigationSection.vue        # ナビゲーションセクション
    Overlay.vue                  # オーバーレイ
```

### 12.2 使用するライブラリ
- **UI コンポーネント**: Nuxt UI v4
  - `<URadio>` / `<URadioGroup>`: ラジオボタン
  - `<UButton>`: アイコンボタン、ナビゲーションリンク
  - `<UIcon>`: アイコン
  - `<USlideover>` または `<UModal>`: サイドメニュー本体（必要に応じて）
- **アニメーション**: Nuxt UI v4 の組み込み機能 + Vue Transition
- **ジェスチャー**: @vueuse/gesture（スワイプ検出）

### 12.3 実装例

```vue
<!-- components/SideMenu/index.vue -->
<template>
  <Teleport to="body">
    <!-- オーバーレイ -->
    <Transition name="fade">
      <div 
        v-if="isOpen"
        class="fixed inset-0 bg-black/50 z-40"
        @click="close"
      />
    </Transition>
    
    <!-- サイドメニュー -->
    <Transition name="slide">
      <nav 
        v-if="isOpen"
        class="fixed top-0 left-0 bottom-0 w-[280px] bg-white z-50 overflow-y-auto"
        role="navigation"
        aria-label="フィルターとナビゲーション"
      >
        <!-- ヘッダー -->
        <div class="p-6">
          <h2 class="text-xl font-bold">最後はいつ？</h2>
        </div>
        
        <!-- 時間フィルター -->
        <TimeFilterSection />
        
        <!-- カテゴリーフィルター -->
        <CategoryFilterSection />
        
        <!-- ナビゲーション -->
        <NavigationSection />
      </nav>
    </Transition>
  </Teleport>
</template>

<script setup lang="ts">
const isOpen = defineModel<boolean>({ default: false });

const close = () => {
  isOpen.value = false;
};

// Escキーでメニューを閉じる
onKeyStroke('Escape', () => {
  if (isOpen.value) {
    close();
  }
});
</script>

<style scoped>
.slide-enter-active,
.slide-leave-active {
  transition: transform 0.3s ease;
}

.slide-enter-from {
  transform: translateX(-100%);
}

.slide-leave-to {
  transform: translateX(-100%);
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
```

## 13. 今後の拡張性

### Phase 2以降で追加予定
- カテゴリーのカスタマイズ（ユーザー独自のカテゴリー作成）
- フィルターのプリセット保存
- 最近使用したフィルターの履歴
- フィルター結果のプレビュー（メニュー内で件数確認）

---

**作成日**: 2026/01/16  
**バージョン**: 1.0  
**更新履歴**:
- 2026/01/16: 初版作成
